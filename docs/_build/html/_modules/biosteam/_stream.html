

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>biosteam._stream &mdash; BioSTEAM 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> BioSTEAM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Getting started.html">1. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../MixedStream objects and thermodynamic equilibrium.html">2. MixedStream objects and thermodynamic equilibrium</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Creating a Unit.html">3. Creating a Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Unit operation examples.html">4. Unit operation examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Find unit operations and manage flowsheets.html">5. Find unit operations and manage flowsheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Using -pipe- notation.html">6. Using -pipe- notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Techno-economic analysis of a biorefinery.html">7. Techno-economic analysis of a biorefinery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Inheriting from Unit.html">8. Inheriting from Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Unit decorators.html">9. Unit decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Stoichiometric reactions.html">10. Stoichiometric reactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Advanced simulation.html">11. Advanced simulation</a></li>
</ul>
<p class="caption"><span class="caption-text">BioSTEAM API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Species.html">Species</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Stream.html">Stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../MixedStream.html">MixedStream</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Unit.html">Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PowerUtility.html">PowerUtility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../HeatUtility.html">HeatUtility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../System.html">System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TEA.html">TEA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Flowsheet.html">find</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compounds.html">compounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../units.html">units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../inspect.html">inspect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reaction.html">reaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../evaluation.html">evaluation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BioSTEAM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>biosteam._stream</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for biosteam._stream</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Sat Aug 18 14:05:10 2018</span>

<span class="sd">@author: yoelr</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">_Q</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">._utils</span> <span class="k">import</span> <span class="n">property_array</span><span class="p">,</span> <span class="n">PropertyFactory</span><span class="p">,</span> <span class="n">DisplayUnits</span><span class="p">,</span> \
                    <span class="n">tuple_array</span><span class="p">,</span> <span class="n">fraction</span><span class="p">,</span> <span class="n">Sink</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="n">MissingStream</span>
<span class="kn">from</span> <span class="nn">._flowsheet</span> <span class="k">import</span> <span class="n">find</span>
<span class="kn">from</span> <span class="nn">._species</span> <span class="k">import</span> <span class="n">Species</span><span class="p">,</span> <span class="n">WorkingSpecies</span>
<span class="kn">from</span> <span class="nn">._exceptions</span> <span class="k">import</span> <span class="n">SolverError</span><span class="p">,</span> <span class="n">EquilibriumError</span><span class="p">,</span> <span class="n">DimensionError</span>
<span class="kn">from</span> <span class="nn">._equilibrium</span> <span class="k">import</span> <span class="n">Dortmund</span><span class="p">,</span> <span class="n">VLE</span><span class="p">,</span> <span class="n">BubblePoint</span><span class="p">,</span> <span class="n">DewPoint</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Stream&#39;</span><span class="p">,)</span>

<span class="c1"># %% TODOs</span>

<span class="c1"># TODO: add material property interphase when using Cape Open package</span>

<span class="c1"># %% Functions</span>

<span class="k">def</span> <span class="nf">nonzero_species</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">flow</span><span class="p">):</span>
    <span class="n">index_</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">IDs_</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">IDs</span> <span class="o">=</span> <span class="n">species</span><span class="o">.</span><span class="n">_IDs</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">species</span><span class="o">.</span><span class="n">_index</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">flow</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">index_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">IDs_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IDs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">index_</span><span class="p">,</span> <span class="n">IDs_</span>

<span class="k">def</span> <span class="nf">_print_helpdata</span><span class="p">(</span><span class="n">helpdata</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print help data.&quot;&quot;&quot;</span>
    <span class="c1"># Only one helplist, print a nice string</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">helpdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">propID</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">dependency</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">datatype</span> <span class="o">=</span> <span class="n">helpdata</span>
        <span class="k">if</span> <span class="n">dependency</span> <span class="o">==</span> <span class="s1">&#39;TP&#39;</span><span class="p">:</span>
            <span class="n">dependency</span> <span class="o">=</span> <span class="s1">&#39;as a function of T and P &#39;</span>
        <span class="k">elif</span> <span class="n">dependency</span> <span class="o">==</span> <span class="s1">&#39;T&#39;</span><span class="p">:</span>
            <span class="n">dependency</span> <span class="o">=</span> <span class="s1">&#39;as a function of T &#39;</span>
        <span class="k">elif</span> <span class="n">dependency</span> <span class="o">==</span> <span class="s1">&#39;P&#39;</span><span class="p">:</span>
            <span class="n">dependency</span> <span class="o">=</span> <span class="s1">&#39;as a function of P &#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{propID}</span><span class="s2">: [</span><span class="si">{datatype}</span><span class="s2">] {description.capitalize()} &quot;</span>
              <span class="s2">&quot;</span><span class="si">{dependency}</span><span class="s2">(</span><span class="si">{units}</span><span class="s2">).&quot;</span><span class="p">)</span>

    <span class="c1"># Many helpdata, print all the nice strings</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">helpdata</span><span class="p">:</span>
            <span class="n">_print_helpdata</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>


<span class="c1"># %% Units of measure</span>

<span class="c1"># Biosteam units of measure</span>
<span class="n">units_of_measure</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">cost</span><span class="o">=</span><span class="s1">&#39;USD/hr&#39;</span><span class="p">,</span>
                        <span class="n">MW</span><span class="o">=</span><span class="s1">&#39;g/mol&#39;</span><span class="p">,</span>
                        <span class="n">mass</span><span class="o">=</span><span class="s1">&#39;kg/hr&#39;</span><span class="p">,</span>
                        <span class="n">mol</span><span class="o">=</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span>
                        <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;m^3/hr&#39;</span><span class="p">,</span>
                        <span class="n">massnet</span><span class="o">=</span><span class="s1">&#39;kg/hr&#39;</span><span class="p">,</span>
                        <span class="n">molnet</span><span class="o">=</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span>
                        <span class="n">volnet</span><span class="o">=</span><span class="s1">&#39;m^3/hr&#39;</span><span class="p">,</span>
                        <span class="n">massfrac</span><span class="o">=</span><span class="s1">&#39;kg/kg&#39;</span><span class="p">,</span>
                        <span class="n">molfrac</span><span class="o">=</span><span class="s1">&#39;kmol/kmol&#39;</span><span class="p">,</span>
                        <span class="n">volfrac</span><span class="o">=</span><span class="s1">&#39;m^3/m^3&#39;</span><span class="p">,</span>
                        <span class="n">T</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span>
                        <span class="n">P</span><span class="o">=</span><span class="s1">&#39;Pa&#39;</span><span class="p">,</span>
                        <span class="n">H</span><span class="o">=</span><span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>
                        <span class="n">S</span><span class="o">=</span><span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>
                        <span class="n">G</span><span class="o">=</span><span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>
                        <span class="n">U</span><span class="o">=</span><span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>
                        <span class="n">A</span><span class="o">=</span><span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>
                        <span class="n">Hf</span><span class="o">=</span><span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>
                        <span class="n">C</span><span class="o">=</span><span class="s1">&#39;kJ/K/hr&#39;</span><span class="p">,</span>
                        <span class="n">Vm</span><span class="o">=</span><span class="s1">&#39;m^3/mol&#39;</span><span class="p">,</span>
                        <span class="n">Cpm</span><span class="o">=</span><span class="s1">&#39;J/mol/K&#39;</span><span class="p">,</span>
                        <span class="n">Cp</span><span class="o">=</span><span class="s1">&#39;J/g/K&#39;</span><span class="p">,</span>
                        <span class="n">rho</span><span class="o">=</span><span class="s1">&#39;kg/m^3&#39;</span><span class="p">,</span>
                        <span class="n">rhom</span><span class="o">=</span><span class="s1">&#39;mol/m^3&#39;</span><span class="p">,</span>
                        <span class="n">nu</span><span class="o">=</span><span class="s1">&#39;m^2/s&#39;</span><span class="p">,</span>
                        <span class="n">mu</span><span class="o">=</span><span class="s1">&#39;Pa*s&#39;</span><span class="p">,</span>
                        <span class="n">sigma</span><span class="o">=</span><span class="s1">&#39;N/m&#39;</span><span class="p">,</span>
                        <span class="n">k</span><span class="o">=</span><span class="s1">&#39;W/m/K&#39;</span><span class="p">,</span>
                        <span class="n">alpha</span><span class="o">=</span><span class="s1">&#39;m^2/s&#39;</span><span class="p">)</span>

<span class="n">mol_flow_dim</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">units_of_measure</span><span class="p">[</span><span class="s1">&#39;mol&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dimensionality</span>
<span class="n">mass_flow_dim</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">units_of_measure</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dimensionality</span>
<span class="n">vol_flow_dim</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">units_of_measure</span><span class="p">[</span><span class="s1">&#39;vol&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dimensionality</span>

<span class="c1"># %% Flow properties</span>

<span class="nd">@PropertyFactory</span>
<span class="k">def</span> <span class="nf">MassFlow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mass flow (kg/hr).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># mol[0] * MW</span>

<span class="nd">@MassFlow</span><span class="o">.</span><span class="n">setter</span>
<span class="k">def</span> <span class="nf">MassFlow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># mol[0] = value/MW</span>

<span class="nd">@PropertyFactory</span>    
<span class="k">def</span> <span class="nf">VolumetricFlow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Volumetric flow (m^3/hr).&quot;&quot;&quot;</span>
    <span class="n">stream</span><span class="p">,</span> <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">mol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="c1"># c = compound</span>
        <span class="n">c</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">T</span>
        <span class="n">c</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">P</span>
        <span class="n">c</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_phase</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">Vm</span> <span class="o">*</span> <span class="n">m</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.</span>

<span class="nd">@VolumetricFlow</span><span class="o">.</span><span class="n">setter</span>
<span class="k">def</span> <span class="nf">VolumetricFlow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">stream</span><span class="p">,</span> <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="c1"># c = compound</span>
        <span class="n">c</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">T</span>
        <span class="n">c</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">P</span>
        <span class="n">c</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_phase</span>
        <span class="n">mol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">/</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">Vm</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>

<span class="n">phases</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">phase_index</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">phases</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">flow</span><span class="p">(</span><span class="n">fget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;can&#39;t set attribute&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">property</span><span class="p">(</span><span class="n">fget</span><span class="p">,</span> <span class="n">fset</span><span class="p">)</span>


<span class="c1"># %% Stream classes</span>

<span class="k">class</span> <span class="nc">metaStream</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Metaclass for Stream.&quot;&quot;&quot;</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">species</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Species] Contains pure component thermodynamic properties for computing overall properties of Stream instances.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_cls_species</span>
    <span class="nd">@species</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">species</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">species</span><span class="p">):</span>
        <span class="c1"># Set Species object and related parameters</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">Species</span><span class="p">):</span>
            <span class="n">Stream</span><span class="o">.</span><span class="n">_cls_species</span> <span class="o">=</span> <span class="n">WorkingSpecies</span><span class="p">(</span><span class="n">species</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">WorkingSpecies</span><span class="p">):</span>
            <span class="n">Stream</span><span class="o">.</span><span class="n">_cls_species</span> <span class="o">=</span> <span class="n">species</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;must pass a Species object&#39;</span><span class="p">)</span>
    <span class="n">_species</span> <span class="o">=</span> <span class="n">species</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls_species</span><span class="o">.</span><span class="n">indices</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls_species</span><span class="o">.</span><span class="n">index</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">MW</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_MW</span>

<div class="viewcode-block" id="Stream"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream">[docs]</a><span class="k">class</span> <span class="nc">Stream</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">metaStream</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a Stream object that defines material flow rates along its thermodynamic state. Thermodynamic and transport properties of a stream are readily available. Ideal mixture is assumed for stream properties and excess thermodynamic energies are neglected as a simplifying assumption for low pressure processes.</span>

<span class="sd">**Parameters**</span>

<span class="sd">    **ID:** [str] A unique identification. If ID is an empty string (i.e. &#39;&#39; ), a default ID will be chosen. If ID is None, stream will not be registered in flowsheet.</span>

<span class="sd">    **flow:** [tuple] All flow rates corresponding to `species`.</span>

<span class="sd">    **species:** tuple[str] or [Species] Species corresponding to `flow`. If empty, assume same species as class.</span>

<span class="sd">    **units:** [str] The units of the flow rates (only mass, molar, and volumetric flow rates are valid)</span>

<span class="sd">    **phase:** [str] &#39;l&#39; for liquid, &#39;g&#39; for gas, or &#39;s&#39; for solid.</span>

<span class="sd">    **T:** [float] Temperature (K).</span>

<span class="sd">    **P:** [float] Pressure (Pa).</span>

<span class="sd">    **price:** [float] (USD/kg).</span>
<span class="sd">    </span>
<span class="sd">    ****flow_pairs:** Compound-flow pairs</span>

<span class="sd">**Class Properties**</span>

<span class="sd">    **species** = Species(): [Species] Contains pure component thermodynamic properties for computing overall properties of Stream instances.</span>

<span class="sd">**Examples**</span>

<span class="sd">    Before making a stream, set the species using a Species object:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; # Set Species object</span>
<span class="sd">       &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;) </span>

<span class="sd">    Stream objects may be created a variety of ways:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; # Create a stream specifying compound and flow rate pairs:</span>
<span class="sd">       &gt;&gt;&gt; s1 = Stream(ID=&#39;s1&#39;, Water=2)</span>
<span class="sd">       &gt;&gt;&gt; s1.show()</span>
<span class="sd">       Stream: s1</span>
<span class="sd">        phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa</span>
<span class="sd">        flow (kmol/hr): Water  2</span>

<span class="sd">       &gt;&gt;&gt; # Create a stream assuming same order as given in species:</span>
<span class="sd">       &gt;&gt;&gt; s2 = Stream(ID=&#39;s2&#39;, flow=(1, 2))</span>
<span class="sd">       &gt;&gt;&gt; s2.show()</span>
<span class="sd">       Stream: s2</span>
<span class="sd">        phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa</span>
<span class="sd">        flow (kmol/hr): Ethanol  1</span>
<span class="sd">                        Water    2</span>

<span class="sd">       &gt;&gt;&gt; # Create a stream passing flow rate units, phase, temperature and pressure:</span>
<span class="sd">       &gt;&gt;&gt; s3 = Stream(ID=&#39;s3&#39;, flow=(0.278, 0.556), units=&#39;mol/s&#39;, phase=&#39;g&#39;, T=400, P=101325)</span>
<span class="sd">       &gt;&gt;&gt; s3.show()</span>
<span class="sd">       Stream: s3</span>
<span class="sd">        phase: &#39;g&#39;, T: 400 K, P: 101325 Pa</span>
<span class="sd">        flow (kmol/hr): Ethanol  1.</span>
<span class="sd">                        Water    2.</span>

<span class="sd">       &gt;&gt;&gt; # The working units do not change</span>
<span class="sd">       &gt;&gt;&gt; s3.mol </span>
<span class="sd">       array([1., 2.])</span>

<span class="sd">    .. Warning:: Stream objects do not automatically calculate thermodynamic equilibrium. They simply assume the given phase, temperature and pressure are correct. To find equilibrium, use the VLE or LLE method.</span>

<span class="sd">    Use the `show` method to print all specifications with desired units:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; # Temperature in degree Celsius</span>
<span class="sd">       &gt;&gt;&gt; s2.show(T=&#39;degC&#39;)</span>
<span class="sd">       Stream: s2 </span>
<span class="sd">        phase: &#39;l&#39;, T: 25. degC, P: 101325 Pa</span>
<span class="sd">        flow (kmol/hr): Ethanol  1</span>
<span class="sd">                        Water    2</span>
<span class="sd">       </span>
<span class="sd">       &gt;&gt;&gt; # Flow in kg/hr</span>
<span class="sd">       &gt;&gt;&gt; s2.show(flow=&#39;kg/hr&#39;)</span>
<span class="sd">       Stream: s2 </span>
<span class="sd">        phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa</span>
<span class="sd">        flow (kg/hr): Ethanol  46.1</span>
<span class="sd">                      Water    36</span>

<span class="sd">       &gt;&gt;&gt; # Flow in fractions</span>
<span class="sd">       &gt;&gt;&gt; s2.show(fraction=True)</span>
<span class="sd">       Stream: s2</span>
<span class="sd">        phase: &#39;l&#39;, T: 298.15 K, P: 101325 Pa</span>
<span class="sd">        flow: Ethanol  0.333</span>
<span class="sd">              Water    0.667</span>
<span class="sd">              net      3 kmol/hr</span>

<span class="sd">    Flow rates are stored internally as an array in the ‘mol’ attribute.</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; # Set Water flow rate</span>
<span class="sd">       &gt;&gt;&gt; s2.mol[1] = 18</span>
<span class="sd">       &gt;&gt;&gt; s2.mol # kmol/hr</span>
<span class="sd">       array([1, 18])</span>

<span class="sd">    Mass and volumetric flow rates are also available as property_arrays of the molar flow rate. As such, they are always up to date with the molar flow rate and altering them also alters the molar flow rate:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; # Altering mass or volumetric flows alters the molar flow</span>
<span class="sd">       &gt;&gt;&gt; s2.vol # m^3/hr</span>
<span class="sd">       property_array([0.059, 0.036])</span>
<span class="sd">       &gt;&gt;&gt; s2.vol[:] = [1, 1]</span>
<span class="sd">       &gt;&gt;&gt; s2.mol</span>
<span class="sd">       array([17.06 , 55.343])</span>
<span class="sd">       &gt;&gt;&gt; # Values are always up to date with the molar flow</span>
<span class="sd">       &gt;&gt;&gt; s2.mol[:] = [1, 2]</span>
<span class="sd">       &gt;&gt;&gt; s2.vol</span>
<span class="sd">       property_array([0.059, 0.036])</span>

<span class="sd">    .. Note::</span>

<span class="sd">       property_array objects are significantly slower than array objects. This is because flow rate data is internally stored as molar flow rates. Also, property_array objects are arrays of python objects, which add overhead over the C implementation of numpy. Whenever possible, use the array to manage flow rates. </span>

<span class="sd">    Some thermodynamic/material properties, including enthalpy and heat capacity, are dependent only on temperature:</span>

<span class="sd">    .. code-block:: python</span>
<span class="sd">    </span>
<span class="sd">       &gt;&gt;&gt; s2.T = 298.15</span>
<span class="sd">       &gt;&gt;&gt; s2.Cp # Heat capacity (kJ/(kg-K))</span>
<span class="sd">       3.200382054794244</span>
<span class="sd">       &gt;&gt;&gt; s2.H  # Enthalpy (kJ/hr)</span>
<span class="sd">       0.0</span>
<span class="sd">       </span>
<span class="sd">       &gt;&gt;&gt; # Change of temperature</span>
<span class="sd">       &gt;&gt;&gt; s2.T = 310</span>
<span class="sd">       &gt;&gt;&gt; s2.H</span>
<span class="sd">       3140.9389548625936</span>
<span class="sd">       &gt;&gt;&gt; s2.Cp</span>
<span class="sd">       3.2590872180092956</span>
<span class="sd">       </span>
<span class="sd">    .. Note:: Thermodynamic energies are relative to 25 degC and 1 atm.</span>
<span class="sd">    </span>
<span class="sd">    Some thermodynamic/material properties, including volume and density, are dependent on both temperature and pressure:</span>

<span class="sd">    .. code-block:: python</span>
<span class="sd">    </span>
<span class="sd">       &gt;&gt;&gt; s1.volnet # Volumetric flow rate (m^3/hr)</span>
<span class="sd">       0.036138079740245625</span>
<span class="sd">       &gt;&gt;&gt; s1.rho # Density (kg/m^3)</span>
<span class="sd">       997.0247522552814</span>
<span class="sd">      </span>
<span class="sd">       &gt;&gt;&gt; # Change of pressure</span>
<span class="sd">       &gt;&gt;&gt; s1.P *= 4</span>
<span class="sd">       &gt;&gt;&gt; s1.volnet</span>
<span class="sd">       0.036136231155141196</span>
<span class="sd">       &gt;&gt;&gt; s1.rho</span>
<span class="sd">       997.0757560552587</span>
<span class="sd">      </span>
<span class="sd">       &gt;&gt;&gt; # Change of temperature</span>
<span class="sd">       &gt;&gt;&gt; s1.T += 30</span>
<span class="sd">       &gt;&gt;&gt; s1.volnet</span>
<span class="sd">       0.03663597700908213</span>
<span class="sd">       &gt;&gt;&gt; s1.rho</span>
<span class="sd">       983.4747955832584</span>

<span class="sd">    A dictionary of available stream properties and respective units of measure is available in `Stream.units`. You may also find it useful to use the `help` method to search for a property:</span>
<span class="sd">        </span>
<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; Stream.help(&#39;conductivity&#39;)</span>
<span class="sd">       k: [float] Thermal conductivity as a function of T and P (W/m/K).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># [dict] Units of measure for material properties (class attribute). </span>
    <span class="n">units</span> <span class="o">=</span> <span class="n">units_of_measure</span>

    <span class="c1"># Information regarding properties</span>
    <span class="n">_prop_info</span> <span class="o">=</span> <span class="p">(</span>
        <span class="c1"># ID         # Description               # Dependency # Units      # Type</span>
        <span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span>        <span class="s1">&#39;temperature&#39;</span><span class="p">,</span>              <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;K&#39;</span><span class="p">,</span>         <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span>        <span class="s1">&#39;enthalpy&#39;</span><span class="p">,</span>                 <span class="s1">&#39;T&#39;</span><span class="p">,</span>         <span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span>        <span class="s1">&#39;entropy&#39;</span><span class="p">,</span>                  <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;G&#39;</span><span class="p">,</span>        <span class="s1">&#39;Gibbs free energy&#39;</span><span class="p">,</span>        <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">,</span>        <span class="s1">&#39;interal energy&#39;</span><span class="p">,</span>           <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span>        <span class="s1">&#39;Helmholtz free energy&#39;</span><span class="p">,</span>    <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Hf&#39;</span><span class="p">,</span>       <span class="s1">&#39;enthalpy of formation&#39;</span><span class="p">,</span>    <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kJ/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">,</span>        <span class="s1">&#39;pressure&#39;</span><span class="p">,</span>                 <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;Pa&#39;</span><span class="p">,</span>        <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Cpm&#39;</span><span class="p">,</span>      <span class="s1">&#39;molar heat capacity&#39;</span><span class="p">,</span>      <span class="s1">&#39;T&#39;</span><span class="p">,</span>         <span class="s1">&#39;J/mol/K&#39;</span><span class="p">,</span>   <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Cp&#39;</span><span class="p">,</span>       <span class="s1">&#39;specific heat capacity&#39;</span><span class="p">,</span>   <span class="s1">&#39;T&#39;</span><span class="p">,</span>         <span class="s1">&#39;J/kg/K&#39;</span><span class="p">,</span>    <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Vm&#39;</span><span class="p">,</span>       <span class="s1">&#39;molar volume&#39;</span><span class="p">,</span>             <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;m^3/mol&#39;</span><span class="p">,</span>   <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;rho&#39;</span><span class="p">,</span>      <span class="s1">&#39;density&#39;</span><span class="p">,</span>                  <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;kg/m^3&#39;</span><span class="p">,</span>    <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;rhom&#39;</span><span class="p">,</span>     <span class="s1">&#39;molar density&#39;</span><span class="p">,</span>            <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;mol/m^3&#39;</span><span class="p">,</span>   <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;nu&#39;</span><span class="p">,</span>       <span class="s1">&#39;kinematic viscosity&#39;</span><span class="p">,</span>      <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;m^2/s&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;mu&#39;</span><span class="p">,</span>       <span class="s1">&#39;hydraulic viscosity&#39;</span><span class="p">,</span>      <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;Pa*s&#39;</span><span class="p">,</span>      <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;sigma&#39;</span><span class="p">,</span>    <span class="s1">&#39;surface tension&#39;</span><span class="p">,</span>          <span class="s1">&#39;T&#39;</span><span class="p">,</span>         <span class="s1">&#39;N/m&#39;</span><span class="p">,</span>       <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;k&#39;</span><span class="p">,</span>        <span class="s1">&#39;thermal conductivity&#39;</span><span class="p">,</span>     <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;W/m/K&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span>    <span class="s1">&#39;thermal diffusivity&#39;</span><span class="p">,</span>      <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;m^2/s&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Pr&#39;</span><span class="p">,</span>       <span class="s1">&#39;Prantl number&#39;</span><span class="p">,</span>            <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">,</span>        <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span>     <span class="s1">&#39;mass flow rates&#39;</span><span class="p">,</span>          <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kg/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;ndarray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;mol&#39;</span><span class="p">,</span>      <span class="s1">&#39;molar flow rates&#39;</span><span class="p">,</span>         <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span>   <span class="s1">&#39;ndarray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;vol&#39;</span><span class="p">,</span>      <span class="s1">&#39;volumetric flow rates&#39;</span><span class="p">,</span>    <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;m^3/hr&#39;</span><span class="p">,</span>    <span class="s1">&#39;ndarray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;massnet&#39;</span><span class="p">,</span>  <span class="s1">&#39;net mass flow rate&#39;</span><span class="p">,</span>       <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kg/hr&#39;</span><span class="p">,</span>     <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;molnet&#39;</span><span class="p">,</span>   <span class="s1">&#39;net molar flow rate&#39;</span><span class="p">,</span>      <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span>   <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;volnet&#39;</span><span class="p">,</span>   <span class="s1">&#39;net volumetric flow rate&#39;</span><span class="p">,</span> <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;m^3/hr&#39;</span><span class="p">,</span>    <span class="s1">&#39;float&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;massfrac&#39;</span><span class="p">,</span> <span class="s1">&#39;mass fractions&#39;</span><span class="p">,</span>           <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kg/kg&#39;</span><span class="p">,</span>     <span class="s1">&#39;ndarray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;molfrac&#39;</span><span class="p">,</span>  <span class="s1">&#39;molar fractions&#39;</span><span class="p">,</span>          <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="s1">&#39;kmol/kmol&#39;</span><span class="p">,</span> <span class="s1">&#39;ndarray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;volfrac&#39;</span><span class="p">,</span>  <span class="s1">&#39;volumetric fractions&#39;</span><span class="p">,</span>     <span class="s1">&#39;TP&#39;</span><span class="p">,</span>        <span class="s1">&#39;m^3/m^3&#39;</span><span class="p">,</span>   <span class="s1">&#39;ndarray&#39;</span><span class="p">))</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;_mol&#39;</span><span class="p">,</span> <span class="s1">&#39;_mass&#39;</span><span class="p">,</span> <span class="s1">&#39;_vol&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;_link&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_species&#39;</span><span class="p">,</span> <span class="s1">&#39;_sink&#39;</span><span class="p">,</span> <span class="s1">&#39;_source&#39;</span><span class="p">,</span> <span class="s1">&#39;_dew_point&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_bubble_point&#39;</span><span class="p">,</span> <span class="s1">&#39;_gamma&#39;</span><span class="p">,</span> <span class="s1">&#39;_phase&#39;</span><span class="p">,</span> <span class="s1">&#39;_lL_split_cached&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;__weakref__&#39;</span><span class="p">,</span> <span class="s1">&#39;_source_link&#39;</span><span class="p">,</span> <span class="s1">&#39;_VLE&#39;</span><span class="p">)</span>

    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;Stream&#39;</span>

    <span class="c1">### Class attributes for working species ###    </span>
    <span class="n">_cls_species</span> <span class="o">=</span> <span class="n">_MW</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="c1"># [list] Default starting letter and current number for ID (class attribute)</span>
    <span class="n">_default_ID</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    
    <span class="c1">#: [bool] If True, approximate energy balance. False otherwise.</span>
    <span class="n">lazy_energy_balance</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1">#: [DisplayUnits] Units of measure for IPython display</span>
    <span class="n">display_units</span> <span class="o">=</span> <span class="n">DisplayUnits</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="s1">&#39;Pa&#39;</span><span class="p">,</span>
                                 <span class="n">flow</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span> <span class="s1">&#39;kg/hr&#39;</span><span class="p">,</span> <span class="s1">&#39;m3/hr&#39;</span><span class="p">),</span>
                                 <span class="n">fraction</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ID</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="p">(),</span> <span class="n">species</span><span class="o">=</span><span class="p">(),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span>
                 <span class="n">phase</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mf">298.15</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="mi">101325</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">flow_pairs</span><span class="p">):</span>
        <span class="c1"># Get species and set species information</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">Species</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="n">WorkingSpecies</span><span class="p">(</span><span class="n">species</span><span class="p">)</span>
            <span class="n">species</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">WorkingSpecies</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="n">species</span>
            <span class="n">species</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls_species</span><span class="p">,</span> <span class="s1">&#39;must define Stream.species first&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cls_species</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_source_link</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">T</span>  <span class="c1">#: [float] Temperature (K)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">P</span>  <span class="c1">#: [float] Pressure (Pa)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>  <span class="c1">#: Price of stream (USD/kg)</span>
        
        <span class="c1"># Initialize flows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setflows</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="n">flow_pairs</span><span class="p">)</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span>
        <span class="n">MW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_MW</span>
        <span class="n">mass</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># Mass flow rates</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># Volumetric flow rates    </span>
        <span class="n">cmps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_index</span><span class="p">:</span>
            <span class="n">mol_i</span> <span class="o">=</span> <span class="n">mol</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">cmps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">mass</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MassFlow</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="p">(</span><span class="n">mol_i</span><span class="p">,</span> <span class="n">MW</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>
            <span class="n">vol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">VolumetricFlow</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mol_i</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mass</span> <span class="o">=</span> <span class="n">property_array</span><span class="p">(</span><span class="n">mass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vol</span> <span class="o">=</span> <span class="n">property_array</span><span class="p">(</span><span class="n">vol</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;kmol/hr&#39;</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">if</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;kg/hr&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mass</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">mol</span>
        <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;m3/hr&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">mol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="n">mol</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
            <span class="n">dim</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">dimensionality</span>
            <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">mol_flow_dim</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
            <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">mass_flow_dim</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mass</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;kg/hr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
            <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">vol_flow_dim</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;m3/hr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DimensionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;dimensions for flow units must be in molar, mass or volumetric flow rates, not &#39;</span><span class="si">{dim}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span> <span class="o">=</span> <span class="n">gamma</span> <span class="o">=</span> <span class="n">Dortmund</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bubble_point</span> <span class="o">=</span> <span class="n">BubblePoint</span><span class="p">(</span><span class="n">gamma</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dew_point</span> <span class="o">=</span> <span class="n">DewPoint</span><span class="p">(</span><span class="n">gamma</span><span class="p">)</span>

<div class="viewcode-block" id="Stream.setflow"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.setflow">[docs]</a>    <span class="k">def</span> <span class="nf">setflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="p">(),</span> <span class="n">species</span><span class="o">=</span><span class="p">(),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">flow_pairs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set `flow` rates according to the `species` order and `flow_pairs`. `inplace` can be any operation that can be performed in place (e.g. +, -, *, /, |, **, etc.).&quot;&quot;&quot;</span>
        <span class="n">species</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">species</span><span class="p">,</span> <span class="o">*</span><span class="n">flow_pairs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">flow</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">flow</span><span class="p">,</span> <span class="o">*</span><span class="n">flow_pairs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="n">species</span><span class="p">)</span> <span class="k">if</span> <span class="n">species</span> <span class="k">else</span> <span class="o">...</span> 
        <span class="n">q</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
        <span class="n">dim</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">dimensionality</span>
        <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">mol_flow_dim</span><span class="p">:</span>
            <span class="n">exec</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;self._mol[index] </span><span class="si">{inplace}</span><span class="s2">= q.to(&#39;kmol/hr&#39;).magnitude&quot;</span><span class="p">,</span> <span class="nb">locals</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">mass_flow_dim</span><span class="p">:</span>
            <span class="n">exec</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;self._mass[index] </span><span class="si">{inplace}</span><span class="s2">= q.to(&#39;kg/hr&#39;).magnitude&quot;</span><span class="p">,</span> <span class="nb">locals</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">vol_flow_dim</span><span class="p">:</span>
            <span class="n">exec</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;self._vol[index] </span><span class="si">{inplace}</span><span class="s2">= q.to(&#39;m3/hr&#39;).magnitude&quot;</span><span class="p">,</span> <span class="nb">locals</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DimensionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;dimensions for flow units must be in molar, mass or volumetric flow rates, not &#39;</span><span class="si">{dim}</span><span class="s2">&#39;&quot;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Stream.getflow"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.getflow">[docs]</a>    <span class="k">def</span> <span class="nf">getflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">species</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get flow rates of species in given units.&quot;&quot;&quot;</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="n">species</span><span class="p">)</span> <span class="k">if</span> <span class="n">species</span> <span class="k">else</span> <span class="o">...</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
        <span class="n">dim</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">dimensionality</span>
        <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">mol_flow_dim</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="n">q</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;kmol/hr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
        <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">mass_flow_dim</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mass</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="n">q</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;kg/hr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
        <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="n">vol_flow_dim</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vol</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">*</span><span class="n">q</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;m3/hr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DimensionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;dimensions for flow units must be in molar, &quot;</span>
                                 <span class="n">f</span><span class="s2">&quot;mass or volumetric flow rates, not &#39;</span><span class="si">{dim}</span><span class="s2">&#39;&quot;</span><span class="p">)</span></div>
    
    <span class="k">def</span> <span class="nf">_setflows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="n">flow_pairs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize molar flow rates according to the species order, and flow_pairs. Instance species do not change.&quot;&quot;&quot;</span>
        <span class="n">flowlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">flow</span><span class="p">)</span>
        <span class="n">specieslen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">species</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">flowlen</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">flow_pairs</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;cannot specify flow pairs when species is passed&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">flowlen</span> <span class="o">==</span> <span class="n">specieslen</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">flow</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="ow">not</span> <span class="n">specieslen</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">flowlen</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_N</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;length of flow rates must be equal to length of species&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">flow_pairs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">flow_pairs</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">flow_pairs</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">species</span><span class="o">.</span><span class="n">_N</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
                
    <span class="c1"># Forward pipping</span>
    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Sink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Stream</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;unsupported operand type(s) for -: &quot;</span>
                            <span class="n">f</span><span class="s2">&quot;&#39;{type(self)}&#39; and &#39;{type(index)}&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">index</span><span class="o">.</span><span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">Stream</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;unsupported operand type(s) for -: &quot;</span>
                            <span class="s2">&quot;&#39;{type(self)}&#39; and &#39;{type(index)}&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">index</span><span class="o">.</span><span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># Backward pipping    </span>
    <span class="fm">__pow__</span> <span class="o">=</span> <span class="fm">__sub__</span>
    <span class="fm">__rpow__</span> <span class="o">=</span> <span class="fm">__rsub__</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">phase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[str] &#39;l&#39; for liquid, &#39;g&#39; for gas, or &#39;s&#39; for solid.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span>
    <span class="nd">@phase</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phase</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">phase</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;phase must be either &#39;s&#39;, &#39;l&#39;, or &#39;g&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span> <span class="o">=</span> <span class="n">phase</span>
    
<div class="viewcode-block" id="Stream.proxy"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.proxy">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">proxy</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">MissingStream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Stream object that serves as a proxy for its `link` stream.&quot;&quot;&quot;</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">Stream</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ID</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_source_link</span> <span class="o">=</span> <span class="n">MissingStream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">link</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">link</span> <span class="o">=</span> <span class="n">link</span>
        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_link</span> <span class="o">=</span> <span class="n">MissingStream</span>
        <span class="k">return</span> <span class="bp">self</span></div>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">link</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;When another Stream object is set as a link, it will share data with that object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_link</span>
    
    <span class="nd">@link</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source_link</span> <span class="ow">is</span> <span class="n">stream</span><span class="o">.</span><span class="n">_source_link</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_link</span> <span class="o">=</span> <span class="n">stream</span>
            <span class="k">elif</span> <span class="n">stream</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ID</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ID</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span>
                              <span class="n">species</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="p">,</span>
                              <span class="n">T</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_species</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mass</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_mass</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_mol</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vol</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_vol</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_dew_point</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_dew_point</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_bubble_point</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_bubble_point</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_gamma</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_source_link</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_source_link</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_link</span> <span class="o">=</span> <span class="n">stream</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">P</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">T</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">phase</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">Error</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">Stream</span><span class="p">):</span> <span class="k">raise</span> <span class="n">Error</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;link must be a Stream object, not a &quot;</span>
                                  <span class="s2">&quot;&#39;{type(stream).__name__}&#39; object.&quot;</span><span class="p">)</span>
    
    <span class="c1"># def __getattr__(self, key):</span>
    <span class="c1">#     if self._link is MissingStream:</span>
    <span class="c1">#         if self.source and self.source._ins[0] is not MissingStream:</span>
    <span class="c1">#             self.source._link_streams()</span>
    <span class="c1">#             try: return object.__getattribute__(self, key)</span>
    <span class="c1">#             except: raise AttributeError(f&#39;{repr(self.source)}.ins[0] is missing stream&#39;)</span>
    <span class="c1">#         raise AttributeError(f&#39;{self}.link is missing stream&#39;)</span>
    <span class="c1">#     elif not self._source_link:</span>
    <span class="c1">#         raise AttributeError(f&#39;{repr(self.link.source)} must be simulated first&#39;)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         raise AttributeError(f&quot;&#39;{type(self).__name__}&#39; has no attribute &#39;{key}&#39;&quot;)</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">species</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Species] Contains pure component thermodynamic properties for computing overall properties of Stream instances.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unique identification (str). If set as &#39;&#39;, it will choose a default ID.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ID</span>

    <span class="nd">@ID</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">ID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ID</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ID</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="c1"># Select a default ID</span>
            <span class="n">letter</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_ID</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_ID</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
            <span class="n">ID</span> <span class="o">=</span> <span class="n">letter</span> <span class="o">+</span> <span class="n">num</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ID</span> <span class="o">=</span> <span class="n">ID</span>
            <span class="n">find</span><span class="o">.</span><span class="n">stream</span><span class="p">[</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="n">ID</span> <span class="ow">and</span> <span class="n">ID</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ID</span><span class="p">:</span>
            <span class="n">ID</span> <span class="o">=</span> <span class="n">ID</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
            <span class="n">ID_words</span> <span class="o">=</span> <span class="n">ID</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">word</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">ID_words</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;ID cannot have any special characters&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ID</span> <span class="o">=</span> <span class="n">ID</span>
            <span class="n">find</span><span class="o">.</span><span class="n">stream</span><span class="p">[</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cost of stream (USD/hr)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">massnet</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">MW</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Molecular weight of all species (array g/mol):     </span>

<span class="sd">        from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Water&#39;, &#39;Ethanol&#39;)</span>
<span class="sd">        &gt;&gt;&gt; Stream.MW</span>
<span class="sd">        tuple_array([18.01528, 46.06844])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_MW</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">tuple_array</span><span class="p">)</span>

    <span class="c1">### Flow properties ###</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return flow indices of specified species.</span>

<span class="sd">        **Parameters**</span>

<span class="sd">             **IDs:** [iterable] species IDs or CAS numbers.</span>

<span class="sd">        Example</span>

<span class="sd">        Indices by ID:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species([&#39;Ethanol&#39;, &#39;Water&#39;])</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream()</span>
<span class="sd">        &gt;&gt;&gt; s1.indices([&#39;Water&#39;, &#39;Ethanol&#39;])</span>
<span class="sd">        [1, 0]</span>

<span class="sd">        Indices by CAS number:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; s1.indices([&#39;7732-18-5&#39;, &#39;64-17-5&#39;]):</span>
<span class="sd">        [1, 0]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">indices</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return index of specified compound.</span>

<span class="sd">        **Parameters**</span>

<span class="sd">             **ID:** [str] compound ID</span>

<span class="sd">        Example</span>

<span class="sd">        Index by ID:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species([&#39;Ethanol&#39;, &#39;Water&#39;])</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream()</span>
<span class="sd">        &gt;&gt;&gt; s1.index(&#39;Water&#39;)</span>
<span class="sd">        1</span>

<span class="sd">        Indices by CAS number:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; s1.index(&#39;7732-18-5&#39;):</span>
<span class="sd">        1</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">index</span>
    
    <span class="c1"># Molar flow</span>
    <span class="nd">@flow</span>
    <span class="k">def</span> <span class="nf">mol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Array of molar flow rates (kmol/hr):</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Water&#39;, &#39;Ethanol&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.mol</span>
<span class="sd">        array([0, 2])</span>
<span class="sd">        &gt;&gt;&gt; s1.mol[:] = [1, 2]</span>
<span class="sd">        &gt;&gt;&gt; s1.mol</span>
<span class="sd">        array([1, 2])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">molfrac</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Array of molar fractions.</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Water&#39;, &#39;Ethanol&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.molfrac</span>
<span class="sd">        tuple_array([0., 1.])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">tuple_array</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">molnet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Net molar flow rate (kmol/hr)</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Water&#39;, &#39;Ethanol&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2, Water=1)</span>
<span class="sd">        &gt;&gt;&gt; s1.molnet</span>
<span class="sd">        3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="c1"># Mass flow</span>
    <span class="nd">@flow</span>
    <span class="k">def</span> <span class="nf">mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Array of mass flow rates (kg/hr)</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.mass</span>
<span class="sd">        property_array([ 0.   , 36.031])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">massfrac</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Array of mass fractions.</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.massfrac</span>
<span class="sd">        tuple_array([0, 1])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_MW</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">tuple_array</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">massnet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Net mass flow rate (kg/hr)</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.mass</span>
<span class="sd">        36.031</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_MW</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="c1"># Volumetric flow</span>
    <span class="nd">@flow</span>
    <span class="k">def</span> <span class="nf">vol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Array of volumetric flow rates as a function of T and P (m^3/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.vol</span>
<span class="sd">        property_array([0.   , 0.036])</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vol</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volfrac</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Array of volumetric fractions as a function of T and P.</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.volfrac</span>
<span class="sd">        tuple_array([0.0, 1.0], dtype=object)</span>
<span class="sd">                &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vol</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">tuple_array</span><span class="p">)</span>
        
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">volnet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Net volumetric flow rate as a function of T and P (m^3/hr).</span>

<span class="sd">        from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.volnet</span>
<span class="sd">        0.036138079740245625</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_propflow</span><span class="p">(</span><span class="s1">&#39;Vm&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span>

    <span class="c1">### Energy flows ###</span>

    <span class="c1"># Enthalpy</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">H</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enthalpy flow rate as a function of T, excluding formation energies (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.H # The stream is at the reference state</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; s1.H = 1000</span>
<span class="sd">        &gt;&gt;&gt; s1.T</span>
<span class="sd">        304.7888167493753</span>
<span class="sd">        &gt;&gt;&gt; s1.H</span>
<span class="sd">        999.5728716085112</span>

<span class="sd">        .. Note:: The solver reaches a level of tolerance and the new temperature is an approximation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_propflow</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@H</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">H</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">H</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lazy_energy_balance</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">+=</span> <span class="p">(</span><span class="n">H</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">C</span>    
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># First approximation</span>
                <span class="n">T_old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span>
                <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">+=</span> <span class="p">(</span><span class="n">H</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">)</span><span class="o">/</span><span class="n">C</span>
            
                <span class="c1"># Solve enthalpy by iteration</span>
                <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">it2</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">-</span> <span class="n">T_old</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.01</span><span class="p">:</span>
                    <span class="n">T_old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">+=</span> <span class="p">(</span><span class="n">H</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span><span class="p">)</span><span class="o">/</span><span class="n">C</span>
                    <span class="k">if</span> <span class="n">it</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                        <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">it2</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span>
                        <span class="k">if</span> <span class="n">it2</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="n">SolverError</span><span class="p">(</span><span class="s2">&quot;could not solve temperature &quot;</span>
                                              <span class="s2">&quot;given enthalpy&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span> <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">Error</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mol</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;cannot set enthalpy to empty stream&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">Error</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Hnet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Total enthaly flow rate including heats of formation&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Hf</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Hf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Heat of formation flow rate (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.Hf</span>
<span class="sd">        -483640.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mol</span> <span class="o">*</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">Hf</span> <span class="ow">or</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Hc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Heat of combustion flow rate (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.Hc</span>
<span class="sd">        -2819966.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mol</span> <span class="o">*</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">Hc</span> <span class="ow">or</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        
    <span class="c1"># Entropy</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">S</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Entropy flow rate as a function of T and P, excluding formation energies (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.S # The stream is at the reference state</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; s1.T = 320</span>
<span class="sd">        &gt;&gt;&gt; s1.S</span>
<span class="sd">        16.503899351682694</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_propflow</span><span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="c1"># Gibbs free energy</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">G</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gibbs free energy flow rate as a function of T and P, excluding formation energies (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.G # The stream is at the reference state</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; s1.T = 320</span>
<span class="sd">        &gt;&gt;&gt; s1.G</span>
<span class="sd">        -182.43024800100193</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span>

    <span class="c1"># Internal energy</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">U</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal energy flow rate as a function of T and P, excluding formation energies (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.U # The stream is at the reference state</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; s1.T = 320</span>
<span class="sd">        &gt;&gt;&gt; s1.U</span>
<span class="sd">        -7090.732710112934</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">H</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">volnet</span>

    <span class="c1"># Helmholtz</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">A</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Helmholtz energy flow rate as a function of T and P, excluding formation energies (kJ/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.A # The stream is at the reference state</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; s1.T = 320</span>
<span class="sd">        &gt;&gt;&gt; s1.A</span>
<span class="sd">        -12371.980502651397</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">U</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">S</span>

    <span class="c1"># Capacity flow rate</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">C</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Heat capacity flow rate as a function of T (kJ/K/hr).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s2.C</span>
<span class="sd">        243.41704115214097</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_propflow</span><span class="p">(</span><span class="s1">&#39;Cpm&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="c1"># Material properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Cp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Specific heat capacity as a function of T (kJ/kg/K).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.Cp</span>
<span class="sd">        2.641906706110962</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cpm</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">molnet</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">massnet</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Cpm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Molar heat capacity as a function of T (kJ/kmol/K).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.Cpm # (J/mol/K)</span>
<span class="sd">        121.70852057607048</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">molnet</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Vm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Molar volume as a function of T and P (m^3/mol).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.Vm</span>
<span class="sd">        0.00012030150757118572</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_prop</span><span class="p">(</span><span class="s1">&#39;Vm&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rho</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Density as a function of T (kg/m^3).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.rho</span>
<span class="sd">        765.8830039638536</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">massnet</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">volnet</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rhom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Molar density as a function of T and P (mol/m^3).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.rhom</span>
<span class="sd">        16.624895567634884</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">molnet</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">volnet</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Kinematic viscosity as a function of T and P (m^2/s).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.nu</span>
<span class="sd">        5.733020843964377e-06</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mu</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">rho</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hydraulic viscosity as a function of T and P (Pa*s).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.mu</span>
<span class="sd">        0.0010780252844121937</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Katti, P.K.; Chaudhri, M.M. (1964). &quot;Viscosities of Binary Mixtures of Benzyl Acetate with Dioxane, Aniline, and m-Cresol&quot;. Journal of Chemical and Engineering Data. 9 (1964): 442–443.</span>
        <span class="c1"># molfrac = self.molfrac</span>
        <span class="c1"># props = self._species._props</span>
        <span class="c1"># mus = np.array(props(&#39;mu&#39;, self._mol, self.T, self.P, self._phase))</span>
        <span class="c1"># Vms = np.array(props(&#39;mu&#39;, self._mol, self.T, self.P, self._phase))</span>
        <span class="c1"># pos = np.where(molfrac != 0)</span>
        <span class="c1"># return np.exp((molfrac[pos]*np.log(mus[pos]*Vms[pos])).sum())/self.Vm</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_prop</span><span class="p">(</span><span class="s1">&#39;mu&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Thermal conductivity as a function of T and P (W/m/k).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.k</span>
<span class="sd">        0.16476716002011285</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_prop</span><span class="p">(</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Thermal diffusivity as a function of T and P (m^2/s).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.alpha</span>
<span class="sd">        8.614274122585474e-08</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_prop</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sigma</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Surface tension as a function of T (N/m).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.sigma</span>
<span class="sd">        0.02188440412824106</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_prop</span><span class="p">(</span><span class="s1">&#39;sigma&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">Pr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prandtl number as a function of T and P (non-dimensional).</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.Pr</span>
<span class="sd">        15.923321696004477</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_prop</span><span class="p">(</span><span class="s1">&#39;Pr&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">P_vapor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Vapor pressure (Pa), not taking into account light species always in gas phase.</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.P_vapor</span>
<span class="sd">        array([7872.1566667784855, 0 ])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span>
        <span class="n">species</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">species</span><span class="o">.</span><span class="n">_equilibrium_indices</span><span class="p">(</span><span class="n">mol</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">compounds</span> <span class="o">=</span> <span class="n">species</span><span class="o">.</span><span class="n">_compounds</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">P_vapor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mol</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">P_vapor</span>
        <span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="n">compounds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">mol</span><span class="o">/</span><span class="n">mol</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span>
        <span class="n">Psat</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">VaporPressure</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">species</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">species</span>
        <span class="n">P_vapor</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">Psat</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">P_vapor</span>
        
    <span class="c1"># Other properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unit source.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unit sink.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nonzero_species</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Flow indices and species that have a non-zero flow rate.</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.nonzero_species</span>
<span class="sd">        [1], [&#39;Water&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">nonzero_species</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span><span class="p">)</span>
    
<div class="viewcode-block" id="Stream.quantity"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.quantity">[docs]</a>    <span class="k">def</span> <span class="nf">quantity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_ID</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a property as a Quantity object as described in the `pint package &lt;https://pint.readthedocs.io/en/latest/&gt;`__ </span>

<span class="sd">        **Parameters**</span>

<span class="sd">             **prop_ID:** [str] name of the property (e.g. &#39;mol&#39;, &#39;H&#39;, &#39;k&#39; ...)</span>

<span class="sd">        Example:</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.quantity(&#39;Cp&#39;)</span>
<span class="sd">        2.4337467143619698 J/K/g</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_ID</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">_Q</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">prop_ID</span><span class="p">])</span></div>

    <span class="c1"># Derivative of a property and sensivity analysis</span>
<div class="viewcode-block" id="Stream.derivative"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.derivative">[docs]</a>    <span class="k">def</span> <span class="nf">derivative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_ID</span><span class="p">,</span> <span class="n">var_ID</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the derivative of property &#39;prop_ID&#39; and variable &#39;var_ID&#39;. If the property given by var_ID is an array, use index to specify which element.</span>

<span class="sd">         **Parameters**</span>

<span class="sd">             **prop_ID:** [str] Name of the property (e.g. &#39;rho&#39;, &#39;Cp&#39;, &#39;H&#39;, &#39;volnet&#39; ...)</span>

<span class="sd">             **var_ID:** [str] Name of the variable (e.g &#39;T&#39;, &#39;P&#39;, &#39;molnet&#39; ...)</span>

<span class="sd">             **index:** [array_like or None] Optional indices if the variable is an array</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Ethanol=2)</span>
<span class="sd">        &gt;&gt;&gt; s1.derivative(&#39;rho&#39;, &#39;T&#39;)</span>
<span class="sd">        -0.8917376157800969</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">getvar</span><span class="p">():</span>
                <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_ID</span><span class="p">)[</span><span class="n">index</span><span class="p">]</span>

            <span class="k">def</span> <span class="nf">setvar</span><span class="p">(</span><span class="n">xf</span><span class="p">):</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_ID</span><span class="p">)[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">xf</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">getvar</span><span class="p">():</span>
                <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_ID</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">setvar</span><span class="p">(</span><span class="n">xf</span><span class="p">):</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_ID</span><span class="p">,</span> <span class="n">xf</span><span class="p">)</span>
        <span class="n">x0</span> <span class="o">=</span> <span class="n">getvar</span><span class="p">()</span>
        <span class="n">y0</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_ID</span><span class="p">)</span>
        <span class="n">xf</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="mi">10</span><span class="o">**-</span><span class="mi">6</span>
        <span class="n">setvar</span><span class="p">(</span><span class="n">xf</span><span class="p">)</span>
        <span class="n">yf</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_ID</span><span class="p">)</span>
        <span class="n">setvar</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">yf</span><span class="o">-</span><span class="n">y0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">xf</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span></div>

    <span class="c1"># Specifications</span>
<div class="viewcode-block" id="Stream.like"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.like">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">like</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">ID</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create either a Stream or MixedStream object just like the given stream, depending on whether multiple phases are present.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span>
                                 <span class="n">species</span><span class="o">=</span><span class="n">stream</span><span class="o">.</span><span class="n">_species</span><span class="p">,</span>
                                 <span class="n">T</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">P</span><span class="p">)</span>
            <span class="n">out</span><span class="o">.</span><span class="n">_molarray</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_molarray</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">_mol</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">_species</span><span class="p">,</span>
                         <span class="n">phase</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">_phase</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">P</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span></div>
    
<div class="viewcode-block" id="Stream.copylike"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.copylike">[docs]</a>    <span class="k">def</span> <span class="nf">copylike</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copy flow rates, T, P, and phase of stream to self.</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream()</span>
<span class="sd">        &gt;&gt;&gt; s2 = Stream(Ethanol=1, Water=2, T=400, phase=&#39;g&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1.copylike(s2)</span>
<span class="sd">        &gt;&gt;&gt; s1.show()</span>
<span class="sd">        Stream: s1</span>
<span class="sd">         phase: &#39;g&#39;, T: 400.00 K, P: 101325 Pa</span>
<span class="sd">         flow (kmol/hr): Ethanol  1</span>
<span class="sd">                         Water    2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_phases</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copylike</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="ow">is</span> <span class="n">stream</span><span class="o">.</span><span class="n">_species</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;species must be the same to copy stream specifications&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">mol</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">P</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">P</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">phase</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">T</span></div>
            
<div class="viewcode-block" id="Stream.copyflow"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.copyflow">[docs]</a>    <span class="k">def</span> <span class="nf">copyflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copy flow rates of stream to self.</span>
<span class="sd">        </span>
<span class="sd">        **Parameters**</span>
<span class="sd">        </span>
<span class="sd">            **stream:** [Stream] Flow rates will be copied from here.</span>
<span class="sd">            </span>
<span class="sd">            **species:** iterable[str] Species IDs. Defaults to all species.</span>
<span class="sd">            </span>
<span class="sd">            **remove:** [bool] If True, copied species will be removed from `stream`.</span>
<span class="sd">            </span>
<span class="sd">            **exclude:** [bool] If True, exclude `species` when copying.</span>
<span class="sd">            </span>
<span class="sd">        .. Note::</span>
<span class="sd">            </span>
<span class="sd">            Species flow rates that are not copied will be set to zero.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="ow">is</span> <span class="n">stream</span><span class="o">.</span><span class="n">_species</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;species must be the same to &#39;</span>
                                                  <span class="s1">&#39;copy stream specifications&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">species</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">mol</span>
            <span class="k">if</span> <span class="n">remove</span><span class="p">:</span> <span class="n">stream</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="n">species</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">mol</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">remove</span><span class="p">:</span>
                    <span class="n">mol</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">_mol</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span><span class="p">):</span>
                        <span class="n">mol</span><span class="p">[:],</span> <span class="n">mol</span><span class="p">[:,</span> <span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mol</span><span class="p">[:,</span> <span class="n">indices</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mol</span><span class="p">[:],</span> <span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">remove</span><span class="p">:</span> 
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span><span class="p">):</span>
                        <span class="n">stream</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">phase_index</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="p">],</span> <span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">stream</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></div>

    <span class="k">def</span> <span class="nf">recieve_vent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">efficiency</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="ow">is</span> <span class="n">stream</span><span class="o">.</span><span class="n">_species</span><span class="p">,</span> <span class="s1">&#39;species must be the same to recieve vent&#39;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">P_vapor</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">P</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">vent_mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span>
        <span class="n">mol2vent</span> <span class="o">=</span> <span class="n">vent_mol</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">Y</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Y</span><span class="p">)</span><span class="o">*</span><span class="n">efficiency</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">-=</span> <span class="n">mol2vent</span>
        <span class="n">vent_mol</span> <span class="o">+=</span> <span class="n">mol2vent</span>

<div class="viewcode-block" id="Stream.empty"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.empty">[docs]</a>    <span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set flow rates to zero</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=1)</span>
<span class="sd">        &gt;&gt;&gt; s1.empty()</span>
<span class="sd">        &gt;&gt;&gt; s1.mol</span>
<span class="sd">        array([0, 0])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">0</span></div>
    
<div class="viewcode-block" id="Stream.bubble_T"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.bubble_T">[docs]</a>    <span class="k">def</span> <span class="nf">bubble_T</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Bubble point at current composition and pressure.</span>

<span class="sd">        **Returns**</span>

<span class="sd">            **T:** [float] Bubble point temperature (T).</span>

<span class="sd">            **y:** [numpy ndarray] Vapor phase composition.</span>
<span class="sd">            </span>
<span class="sd">            **indices:** [list] Indices of species in equilibrium</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; stream = Stream(flow=(0.6, 0.4),</span>
<span class="sd">        ...                 species=Species(&#39;Ethanol&#39;, &#39;Water&#39;))</span>
<span class="sd">        &gt;&gt;&gt; stream.bubble_T()</span>
<span class="sd">        (352.2820850833474, array([0.703, 0.297]), [0, 1])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span>
        <span class="c1"># If just one specie in equilibrium, return Tsat</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_equilibrium_indices</span><span class="p">(</span><span class="n">mol</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cmps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">cmps</span><span class="p">[</span><span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">Tsat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,)),</span> <span class="n">indices</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EquilibriumError</span><span class="p">(</span><span class="s1">&#39;no species available for phase equilibrium&#39;</span><span class="p">)</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
        <span class="c1"># Solve and return bubble point</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_bubble_point</span><span class="o">.</span><span class="n">solve_Ty</span><span class="p">(</span><span class="n">mol</span><span class="o">/</span><span class="n">mol</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">),</span> <span class="n">indices</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Stream.bubble_P"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.bubble_P">[docs]</a>    <span class="k">def</span> <span class="nf">bubble_P</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Bubble point at current composition and temperature.</span>

<span class="sd">        **Returns**</span>

<span class="sd">            **P:** [float] Bubble point pressure (Pa).</span>

<span class="sd">            **y:** [numpy ndarray] Vapor phase composition.</span>
<span class="sd">            </span>
<span class="sd">            **indices:** [list] Indices of species in equilibrium</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(flow=(0.703, 0.297), T=352.28,</span>
<span class="sd">                        species=Species(&#39;Ethanol&#39;, &#39;Water&#39;))</span>
<span class="sd">        &gt;&gt;&gt; s1.bubble_P()</span>
<span class="sd">        (103494.17209657285, array([0.757, 0.243]), [0, 1])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span>
        <span class="c1"># If just one specie in equilibrium, return Tsat</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_equilibrium_indices</span><span class="p">(</span><span class="n">mol</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cmps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">cmps</span><span class="p">[</span><span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">VaporPressure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,)),</span> <span class="n">indices</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EquilibriumError</span><span class="p">(</span><span class="s1">&#39;no species available for phase equilibrium&#39;</span><span class="p">)</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
        <span class="c1"># Solve and return bubble point</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_bubble_point</span><span class="o">.</span><span class="n">solve_Py</span><span class="p">(</span><span class="n">mol</span><span class="o">/</span><span class="n">mol</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">indices</span><span class="p">)</span></div>

<div class="viewcode-block" id="Stream.dew_T"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.dew_T">[docs]</a>    <span class="k">def</span> <span class="nf">dew_T</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Dew point at current composition and pressure.</span>
<span class="sd">        </span>
<span class="sd">        **Returns**</span>

<span class="sd">            **T:** [float] Dew point temperature (K).</span>

<span class="sd">            **x:** [numpy array] Liquid phase composition.</span>
<span class="sd">            </span>
<span class="sd">            **indices:** [list] Indices of species in equilibrium</span>

<span class="sd">        &gt;&gt;&gt; stream = Stream(flow=(0.5, 0.5),</span>
<span class="sd">        ...                 species=Species(&#39;Ethanol&#39;, &#39;Water&#39;))</span>
<span class="sd">        &gt;&gt;&gt; stream.dew_T()</span>
<span class="sd">        (357.45184742263075, array([0.151, 0.849]), [0, 1])</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span>
        <span class="c1"># If just one specie in equilibrium, return Tsat</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_equilibrium_indices</span><span class="p">(</span><span class="n">mol</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cmps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">cmps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Tsat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,)),</span> <span class="n">indices</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EquilibriumError</span><span class="p">(</span><span class="s1">&#39;no species available for phase equilibrium&#39;</span><span class="p">)</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
        <span class="c1"># Solve and return dew point</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_dew_point</span><span class="o">.</span><span class="n">solve_Tx</span><span class="p">(</span><span class="n">mol</span><span class="o">/</span><span class="n">mol</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">),</span> <span class="n">indices</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Stream.dew_P"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.dew_P">[docs]</a>    <span class="k">def</span> <span class="nf">dew_P</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Dew point at current composition and temperature.</span>
<span class="sd">        </span>
<span class="sd">        **Returns**</span>

<span class="sd">            **P:** [float] Dew point pressure (Pa).</span>

<span class="sd">            **x:** [numpy array] Liquid phase composition.</span>
<span class="sd">            </span>
<span class="sd">            **indices:** [list] Indices of species in equilibrium</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; stream = Stream(flow=(0.703, 0.297), T=352.28,</span>
<span class="sd">        ...                 species=Species(&#39;Ethanol&#39;, &#39;Water&#39;))</span>
<span class="sd">        &gt;&gt;&gt; stream.dew_P()</span>
<span class="sd">        (101328.47030327446, array([0.6, 0.4]), [0, 1])</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mol</span>
        <span class="c1"># If just one specie in equilibrium, return Tsat</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_equilibrium_indices</span><span class="p">(</span><span class="n">mol</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cmps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_compounds</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">cmps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">VaporPressure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,)),</span> <span class="n">indices</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EquilibriumError</span><span class="p">(</span><span class="s1">&#39;no species available for phase equilibrium&#39;</span><span class="p">)</span>        
        <span class="n">mol</span> <span class="o">=</span> <span class="n">mol</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">_gamma</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
        <span class="c1"># Solve and return dew point</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_dew_point</span><span class="o">.</span><span class="n">solve_Px</span><span class="p">(</span><span class="n">mol</span><span class="o">/</span><span class="n">mol</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">indices</span><span class="p">)</span></div>

    <span class="c1"># Dimensionless number methods</span>
<div class="viewcode-block" id="Stream.Re"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.Re">[docs]</a>    <span class="k">def</span> <span class="nf">Re</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return Reynolds number.</span>

<span class="sd">        **Parameters**</span>

<span class="sd">             **L:** [float] Characteristic lenght (m)</span>

<span class="sd">             **A:** [float] Cross-sectional area (m^2). If A is None, assume flow through a cylindrical pipe.</span>

<span class="sd">        Example</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Ethanol&#39;, &#39;Water&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=200)</span>
<span class="sd">        &gt;&gt;&gt; s1.Re(0.2, 0.031416)</span>
<span class="sd">        27639.956372923512</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">volnet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">volnet</span><span class="o">/</span><span class="mi">3600</span> <span class="c1"># m3/s</span>
        <span class="k">if</span> <span class="n">A</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Assume pipe</span>
            <span class="k">return</span> <span class="mi">4</span><span class="o">*</span><span class="n">volnet</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nu</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">L</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">volnet</span><span class="o">*</span><span class="n">L</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nu</span><span class="o">*</span><span class="n">A</span><span class="p">)</span></div>

    <span class="c1"># Class methods</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_helpdata</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return information related to a property.</span>

<span class="sd">        **Parameters**</span>

<span class="sd">             **prop:** [str] name or description of a property</span>

<span class="sd">        Return</span>

<span class="sd">             **out:** tupple[str] where elements are:</span>
<span class="sd">                  * **ID:** [str] name of the property</span>

<span class="sd">                  * **Description:** [str] description of the property</span>

<span class="sd">                  * **Dependency:** [str] TP dependency</span>

<span class="sd">                  * **Units:** [str] units of measure</span>

<span class="sd">                  * **Datatype:** [str] type returned by property</span>

<span class="sd">        Example</span>

<span class="sd">        &gt;&gt;&gt; Stream._helplist(&#39;k&#39;)</span>
<span class="sd">        (&#39;k&#39;, &#39;thermal conductivity&#39;, &#39;TP&#39;, &#39;W/m/K&#39;, &#39;float&#39;)</span>

<span class="sd">        &gt;&gt;&gt; Stream._helplist(&#39;viscosity&#39;)</span>
<span class="sd">        ((&#39;nu&#39;, &#39;kinematic viscosity&#39;, &#39;TP&#39;, &#39;m^2/s&#39;, &#39;float&#39;),</span>
<span class="sd">         (&#39;mu&#39;, &#39;hydraulic viscosity&#39;, &#39;TP&#39;, &#39;Pa*s&#39;, &#39;float&#39;))</span>

<span class="sd">        &gt;&gt;&gt; Stream._helplist(&#39;kmol/hr&#39;)</span>
<span class="sd">        ((&#39;mol&#39;, &#39;molar flow rates&#39;, &#39;&#39;, &#39;kmol/hr&#39;, &#39;np.array&#39;),</span>
<span class="sd">         (&#39;molnet&#39;, &#39;net molar flow rate&#39;, &#39;&#39;, &#39;kmol/hr&#39;, &#39;float&#39;))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Compare by both ID and description</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c1"># Search for exact matches</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_prop_info</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span> <span class="k">return</span> <span class="n">l</span>
        
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>    
            <span class="c1"># If no matches found, search harder</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_prop_info</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

<div class="viewcode-block" id="Stream.help"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.help">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">help</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print information related to a property.</span>

<span class="sd">        **Parameters**</span>

<span class="sd">             **prop:** [str] name or description of a property     </span>

<span class="sd">        Example</span>

<span class="sd">        &gt;&gt;&gt; Stream.help(&#39;rho&#39;)</span>
<span class="sd">        rho: [float] Density as a function of T and P (kg/m^3).</span>
<span class="sd">        &gt;&gt;&gt; Stream.help(&#39;density&#39;)</span>
<span class="sd">        rho: [float] Density as a function of T and P (kg/m^3).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_helpdata</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span> <span class="n">_print_helpdata</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;No matching property &#39;</span><span class="si">{prop}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Stream.T_equilibrium"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.T_equilibrium">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">T_equilibrium</span><span class="p">(</span><span class="n">streams</span><span class="p">,</span> <span class="n">T_guess</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Q_in</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">approximate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Bring all streams to temperature equilibrium.</span>

<span class="sd">        **Parameters**</span>

<span class="sd">            **streams:** [Stream] All streams</span>
<span class="sd">        </span>
<span class="sd">            **T_guess:** [float] Equilibrium temperature guess (K)</span>

<span class="sd">            **Q_in:** [float] Heat addition to streams (kJ/hr)     </span>
<span class="sd">            </span>
<span class="sd">            **approximate:** [bool] If True, approximate energy balance with constant heat capacity</span>

<span class="sd">        **Return**</span>

<span class="sd">             **T:** [float] New temperature (K)</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Water&#39;, &#39;Ethanol&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2, T=300)</span>
<span class="sd">        &gt;&gt;&gt; s2 = Stream(Ethanol=1, Water=2, T=340)</span>
<span class="sd">        &gt;&gt;&gt; Stream.T_equilibrium([s1, s2])</span>
<span class="sd">        &gt;&gt;&gt; (s1.T, s2.T)</span>
<span class="sd">        (325.8281231556553, 325.8281231556553)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sum_</span> <span class="o">=</span> <span class="nb">sum</span>
        <span class="c1"># Set up problem</span>
        <span class="n">C</span> <span class="o">=</span> <span class="n">sum_</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">C</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">])</span>
        <span class="n">H_</span> <span class="o">=</span> <span class="n">sum_</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">H</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">])</span> <span class="o">+</span> <span class="n">Q_in</span>
        
        <span class="c1"># Set initial temperature</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">T_guess</span><span class="p">:</span>
            <span class="n">T_guess</span> <span class="o">=</span> <span class="n">sum_</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">T</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">])</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">T_guess</span>
        
        <span class="c1"># Find new T</span>
        <span class="n">H</span> <span class="o">=</span> <span class="n">sum_</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">H</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">])</span>
        <span class="n">T</span> <span class="o">=</span> <span class="n">T_guess</span> <span class="o">+</span> <span class="p">(</span><span class="n">H_</span> <span class="o">-</span> <span class="n">H</span><span class="p">)</span><span class="o">/</span><span class="n">C</span>
        
        <span class="c1"># Update</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">T_guess</span>
        <span class="k">if</span> <span class="n">approximate</span><span class="p">:</span> <span class="k">return</span>
        
        <span class="c1"># Solve enthalpy by iteration</span>
        <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">T_guess</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.01</span><span class="p">:</span>
            <span class="c1"># Calculate</span>
            <span class="n">H_</span> <span class="o">=</span> <span class="n">sum_</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">H</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">])</span>
            <span class="n">T</span> <span class="o">=</span> <span class="n">T_guess</span> <span class="o">+</span> <span class="p">(</span><span class="n">H_</span><span class="o">-</span> <span class="n">H</span><span class="p">)</span><span class="o">/</span><span class="n">C</span>
            
            <span class="c1"># Check iteration</span>
            <span class="k">if</span> <span class="n">it</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SolverError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;could not solve temperature&quot;</span><span class="p">)</span>
            
            <span class="c1"># Update</span>
            <span class="n">T_guess</span> <span class="o">=</span> <span class="n">T</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">T_guess</span>
            <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Stream.sum"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.sum">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">s_sum</span><span class="p">,</span> <span class="n">streams</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Mixes streams and sets resulting mass and energy in &#39;s_sum&#39;. Assumes the same pressure as streams[0], and no phase equilibrium. If &#39;s_sum&#39; is a Stream object, it assumes the phase does not change.</span>

<span class="sd">        **Parameters** </span>

<span class="sd">             **s_sum:** [Stream] Container for the resulting mixture of streams</span>

<span class="sd">             **streams:** [tuple] Stream objects to be mixed</span>

<span class="sd">        .. Note:: Ignores contents of `s_sum` as if it was empty</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; from biosteam import *</span>
<span class="sd">        &gt;&gt;&gt; Stream.species = Species(&#39;Water&#39;, &#39;Ethanol&#39;)</span>
<span class="sd">        &gt;&gt;&gt; s1 = Stream(Water=2, T=300)</span>
<span class="sd">        &gt;&gt;&gt; s2 = Stream(Ethanol=1, Water=2, T=340)</span>
<span class="sd">        &gt;&gt;&gt; s_sum = Stream(&#39;s_sum&#39;)</span>
<span class="sd">        &gt;&gt;&gt; Stream.sum(s_sum, [s1, s2])</span>
<span class="sd">        &gt;&gt;&gt; s_sum.show()</span>
<span class="sd">        Stream: s_sum</span>
<span class="sd">         phase: &#39;l&#39;, T: 326.29 K, P: 101325 Pa</span>
<span class="sd">         flow (kmol/hr): Ethanol  1</span>
<span class="sd">                         Water    4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if energy balance is required</span>
        <span class="n">T_init</span> <span class="o">=</span> <span class="n">streams</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
        <span class="n">other_streams</span> <span class="o">=</span> <span class="n">streams</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">energy_balance</span> <span class="o">=</span> <span class="nb">any</span><span class="p">([</span><span class="n">T_init</span><span class="o">!=</span><span class="n">s</span><span class="o">.</span><span class="n">T</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">other_streams</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">energy_balance</span><span class="p">:</span> <span class="n">H</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">H</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">])</span>

        <span class="c1"># Copy starting values</span>
        <span class="n">s_sum</span><span class="o">.</span><span class="n">copylike</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="c1"># Mass balance</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="nb">isinstance</span>
        <span class="n">MStream</span> <span class="o">=</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inst</span><span class="p">(</span><span class="n">s_sum</span><span class="p">,</span> <span class="n">MStream</span><span class="p">):</span>
                <span class="c1"># For MixedStream objects</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">other_streams</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">inst</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">MStream</span><span class="p">):</span>
                        <span class="n">s_sum</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">_mol</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">s_sum</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">phase_index</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">_phase</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">_mol</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># For Stream objects</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">other_streams</span><span class="p">:</span>
                    <span class="n">s_sum</span><span class="o">.</span><span class="n">_mol</span><span class="p">[:]</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">mol</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">Error</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">inst</span><span class="p">(</span><span class="n">s_sum</span><span class="p">,</span> <span class="n">Stream</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;s_sum must be a Stream object, not &#39;</span>
                                <span class="s2">&quot;&#39;{type(s_sum).__name__}&#39;&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streams</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">inst</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Stream</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;streams must only contain Stream &#39;</span>
                                    <span class="n">f</span><span class="s1">&#39;objects, not {type(s).__name__} objects&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">Error</span>

        <span class="c1"># Energy Balance</span>
        <span class="k">if</span> <span class="n">energy_balance</span><span class="p">:</span> <span class="n">s_sum</span><span class="o">.</span><span class="n">H</span> <span class="o">=</span> <span class="n">H</span></div>

    <span class="c1"># MixedStream compatibility</span>
<div class="viewcode-block" id="Stream.enable_phases"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.enable_phases">[docs]</a>    <span class="k">def</span> <span class="nf">enable_phases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cast stream into a MixedStream object.&quot;&quot;&quot;</span>
        <span class="n">mol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">MS</span><span class="o">.</span><span class="n">MixedStream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setflows</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="o">.</span><span class="n">_N</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mol</span><span class="p">[</span><span class="n">phase_index</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">]]</span> <span class="o">=</span> <span class="n">mol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lL_split_cached</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_VLE</span> <span class="o">=</span> <span class="n">VLE</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Stream.disable_phases"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.disable_phases">[docs]</a>    <span class="k">def</span> <span class="nf">disable_phases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phase</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cast stream into a Stream object.</span>
<span class="sd">        </span>
<span class="sd">        **Parameters**</span>
<span class="sd">        </span>
<span class="sd">            **phase:** {&#39;s&#39;, &#39;l&#39;, &#39;g&#39;} desired phase of stream</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span> <span class="o">=</span> <span class="n">phase</span></div>
            
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">VLE</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A callable VLE object for vapor-liquid equilibrium.</span>

<span class="sd">        **Parameters**</span>
<span class="sd">        </span>
<span class="sd">            **Specify two:**</span>
<span class="sd">                * **P:** [float] Operating pressure (Pa)</span>
<span class="sd">                * **Q:** [float] Energy input (kJ/hr)</span>
<span class="sd">                * **T:** [float] Operating temperature (K)</span>
<span class="sd">                * **V:** [float] Molar vapor fraction</span>
<span class="sd">                * **x:** [numpy array] Molar composition of liquid (for binary mixture)</span>
<span class="sd">                * **y:** [numpy array] Molar composition of vapor (for binary mixture)</span>

<span class="sd">            **Optional:**</span>
<span class="sd">            </span>
<span class="sd">                **species_IDs:** [tuple] IDs of species in equilibrium.</span>
<span class="sd">                     </span>
<span class="sd">                **LNK:** tuple[str] Light non-keys that remain as a vapor.</span>
<span class="sd">        </span>
<span class="sd">                **HNK:** tuple[str] Heavy non-keys that remain as a liquid.</span>

<span class="sd">        .. Note:</span>
<span class="sd">           LNK and HNK are not taken into account for equilibrium. Parameters not specified are None by default.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_phases</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_VLE</span>
        
<div class="viewcode-block" id="Stream.LLE"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.LLE">[docs]</a>    <span class="k">def</span> <span class="nf">LLE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">species_IDs</span><span class="o">=</span><span class="p">(),</span> <span class="n">split</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lNK</span><span class="o">=</span><span class="p">(),</span> <span class="n">LNK</span><span class="o">=</span><span class="p">(),</span>
            <span class="n">solvents</span><span class="o">=</span><span class="p">(),</span> <span class="n">solvent_split</span><span class="o">=</span><span class="p">(),</span>
            <span class="n">P</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_phases</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LLE</span><span class="p">(</span><span class="n">species_IDs</span><span class="p">,</span> <span class="n">split</span><span class="p">,</span> <span class="n">lNK</span><span class="p">,</span> <span class="n">LNK</span><span class="p">,</span>
                 <span class="n">solvents</span><span class="p">,</span> <span class="n">solvent_split</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_info_header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return stream information header.&quot;&quot;&quot;</span>
        <span class="c1"># First line</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;  from  {type(unit).__name__}-</span><span class="si">{unit}</span><span class="s1">&#39;</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sink</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sink</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;  to  {type(unit).__name__}-</span><span class="si">{unit}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{type(self).__name__}: </span><span class="si">{self.ID}{source}{sink}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;{type(self).__name__}</span><span class="si">{source}{sink}</span><span class="s2">&quot;</span>
        
    <span class="k">def</span> <span class="nf">_info_phaseTP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phases</span><span class="p">,</span> <span class="n">T_units</span><span class="p">,</span> <span class="n">P_units</span><span class="p">):</span>
        <span class="n">T</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">T_units</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
        <span class="n">P</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">P_units</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot; phase: &#39;</span><span class="si">{phases}</span><span class="s2">&#39;, T: </span><span class="si">{T:.5g}</span><span class="s2"> </span><span class="si">{T_units}</span><span class="s2">, P: </span><span class="si">{P:.6g}</span><span class="s2"> </span><span class="si">{P_units}</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="c1"># Representation</span>
    <span class="k">def</span> <span class="nf">_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">fraction</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return string with all specifications.&quot;&quot;&quot;</span>
        <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span>
        <span class="n">basic_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info_header</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_mol&#39;</span><span class="p">):</span>
            <span class="n">nonzero</span><span class="p">,</span> <span class="n">species</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonzero_species</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">basic_info</span> <span class="o">+</span> <span class="n">f</span><span class="s1">&#39; link: </span><span class="si">{self._link}</span><span class="s1">&#39;</span>
        <span class="n">T_units</span><span class="p">,</span> <span class="n">P_units</span><span class="p">,</span> <span class="n">flow_units</span><span class="p">,</span> <span class="n">fraction</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span>
                                                  <span class="nb">zip</span><span class="p">((</span><span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">fraction</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_units</span><span class="p">)]</span>
        <span class="n">basic_info</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info_phaseTP</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_phase</span><span class="p">,</span> <span class="n">T_units</span><span class="p">,</span> <span class="n">P_units</span><span class="p">)</span>
        <span class="n">len_</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nonzero</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">len_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">basic_info</span> <span class="o">+</span> <span class="s1">&#39; flow: 0&#39;</span> 
        <span class="c1"># Start of third line (flow rates)</span>
        <span class="n">flow_dim</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">flow_units</span><span class="p">)</span><span class="o">.</span><span class="n">dimensionality</span>
        <span class="k">if</span> <span class="n">fraction</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">flow_dim</span> <span class="o">==</span> <span class="n">mol_flow_dim</span><span class="p">:</span>
                <span class="n">flownet</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">molnet</span><span class="p">,</span> <span class="n">units</span><span class="p">[</span><span class="s1">&#39;molnet&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">flow_units</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;molfrac&#39;</span>
            <span class="k">elif</span> <span class="n">flow_dim</span> <span class="o">==</span> <span class="n">mass_flow_dim</span><span class="p">:</span>
                <span class="n">flownet</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">massnet</span><span class="p">,</span> <span class="n">units</span><span class="p">[</span><span class="s1">&#39;massnet&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">flow_units</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;massfrac&#39;</span>
            <span class="k">elif</span> <span class="n">flow_dim</span> <span class="o">==</span> <span class="n">vol_flow_dim</span><span class="p">:</span>
                <span class="n">flownet</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volnet</span><span class="p">,</span> <span class="n">units</span><span class="p">[</span><span class="s1">&#39;volnet&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">flow_units</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;volfrac&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DimensionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;dimensions for flow units must be in molar, mass or volumetric flow rates, not &#39;</span><span class="si">{flow_dim}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">beginning</span> <span class="o">=</span> <span class="s1">&#39; flow: &#39;</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*</span><span class="si">{flownet:.3g}</span><span class="s1"> </span><span class="si">{flow_units}</span><span class="s1"> &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">beginning</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39; flow (</span><span class="si">{flow_units}</span><span class="s1">): &#39;</span>
            <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">flow_dim</span> <span class="o">==</span> <span class="n">mol_flow_dim</span><span class="p">:</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;mol&#39;</span>
            <span class="k">elif</span> <span class="n">flow_dim</span> <span class="o">==</span> <span class="n">mass_flow_dim</span><span class="p">:</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;mass&#39;</span>
            <span class="k">elif</span> <span class="n">flow_dim</span> <span class="o">==</span> <span class="n">vol_flow_dim</span><span class="p">:</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="s1">&#39;vol&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DimensionError</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;dimensions for flow units must be in molar, mass or volumetric flow rates, not &#39;</span><span class="si">{flow_dim}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="c1"># Remaining lines (all flow rates)</span>
        <span class="n">new_line_spaces</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">beginning</span><span class="p">)</span> <span class="o">*</span> <span class="s1">&#39; &#39;</span>
        <span class="k">if</span> <span class="s1">&#39;frac&#39;</span> <span class="ow">in</span> <span class="n">flow</span><span class="p">:</span>
            <span class="n">flow</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flow</span><span class="p">)[</span><span class="n">nonzero</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">flow</span> <span class="o">=</span> <span class="n">_Q</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flow</span><span class="p">)[</span><span class="n">nonzero</span><span class="p">],</span> <span class="n">units</span><span class="p">[</span><span class="n">flow</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">flow_units</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
        
        <span class="n">flowrates</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span> <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">species</span><span class="p">]</span>
        <span class="n">maxlen</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">len_</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">spaces</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">-</span> <span class="n">lengths</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">flowrates</span> <span class="o">+=</span> <span class="n">species</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">spaces</span> <span class="o">+</span> <span class="n">f</span><span class="s1">&#39; </span><span class="si">{flow[i]:.3g}</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">new_line_spaces</span>
        <span class="n">spaces</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">-</span> <span class="n">lengths</span><span class="p">[</span><span class="n">len_</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">flowrates</span> <span class="o">+=</span> <span class="n">species</span><span class="p">[</span><span class="n">len_</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">spaces</span> <span class="o">+</span> <span class="n">f</span><span class="s1">&#39; </span><span class="si">{flow[len_-1]:.3g}</span><span class="s1">&#39;</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">basic_info</span> 
              <span class="o">+</span> <span class="n">beginning</span>
              <span class="o">+</span> <span class="n">flowrates</span>
              <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">new_line_spaces</span> <span class="o">+</span> <span class="s1">&#39;net&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="n">maxlen</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;  &#39;</span><span class="p">))</span>

<div class="viewcode-block" id="Stream.show"><a class="viewcode-back" href="../../Stream.html#biosteam.Stream.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flow</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fraction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print all specifications.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">fraction</span><span class="p">))</span></div>
    <span class="n">_ipython_display_</span> <span class="o">=</span> <span class="n">show</span>

    <span class="k">def</span> <span class="nf">_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">outs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span><span class="o">.</span><span class="n">_outs</span>
        <span class="k">if</span> <span class="n">outs</span><span class="p">:</span> <span class="n">outs</span><span class="p">[</span><span class="n">outs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)]</span> <span class="o">=</span> <span class="n">MissingStream</span>
        <span class="n">ins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span><span class="o">.</span><span class="n">_ins</span>
        <span class="k">if</span> <span class="n">ins</span><span class="p">:</span> <span class="n">ins</span><span class="p">[</span><span class="n">ins</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)]</span> <span class="o">=</span> <span class="n">MissingStream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">:</span> <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;&lt;{type(self).__name__}: </span><span class="si">{self.ID}</span><span class="s1">&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;&lt;{type(self).__name__}&gt;&#39;</span></div>
        
        
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">_mixed_stream</span> <span class="k">as</span> <span class="n">MS</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Yoel Cortes-Pena and Jeremy Guest

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>